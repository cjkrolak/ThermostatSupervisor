name: Safety Scan
on:
    pull_request:
      branches: [ develop ]
jobs:
  security:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run Safety CLI to check for vulnerabilities
        uses: pyupio/safety-action@v1
        with:
          api-key: ${{ secrets.SAFETY_API_KEY }}

# these args were used in the ADO pipeline with safety check, not sure if they are needed here or in a safety policy
# ref: https://docs.safetycli.com/safety-docs/administration/safety-policy-files
#      args:
#          -r requirements.txt
#          -i 62044 , pip <23.3 error
#          -i 70612, jinja2 > 0 error
