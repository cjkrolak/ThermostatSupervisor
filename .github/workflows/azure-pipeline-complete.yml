name: Azure Pipelines

# This workflow is triggered by Azure DevOps pipeline completion
on:
  repository_dispatch:
    types: [azure-pipeline-completed]

jobs:
  azure-pipeline-complete:
    name: Azure Pipeline Complete
    runs-on: ubuntu-latest
    # Only run if the Azure pipeline was successful
    if: github.event.client_payload.pipeline_result == 'success'
    
    steps:
      - name: Azure Pipeline Completed Successfully
        run: |
          echo "Azure DevOps pipeline completed successfully"
          echo "Pipeline ID: ${{ github.event.client_payload.pipeline_id }}"
          echo "Branch: ${{ github.event.client_payload.branch }}"
          echo "This workflow serves as a bridge to trigger SonarQube analysis"